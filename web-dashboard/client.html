<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XMBL P2P Client - Storage & Compute</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #ffd700;
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card h3 {
            margin-bottom: 20px;
            color: #ffd700;
            font-size: 1.5em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #e0e0e0;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
        }
        
        .form-group input::placeholder, .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .form-group input[type="file"] {
            padding: 8px;
            background: rgba(255, 255, 255, 0.2);
        }
        
        .btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(45deg, #2196F3, #1976D2);
        }
        
        .btn-warning {
            background: linear-gradient(45deg, #FF9800, #F57C00);
        }
        
        .btn-danger {
            background: linear-gradient(45deg, #F44336, #D32F2F);
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .status-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #4CAF50;
        }
        
        .status-item.warning {
            border-left-color: #FF9800;
        }
        
        .status-item.error {
            border-left-color: #F44336;
        }
        
        .status-item h4 {
            color: #ffd700;
            margin-bottom: 8px;
        }
        
        .file-list, .task-list {
            max-height: 300px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
        }
        
        .file-item, .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            border-left: 3px solid #4CAF50;
        }
        
        .file-item.warning, .task-item.warning {
            border-left-color: #FF9800;
        }
        
        .file-item.error, .task-item.error {
            border-left-color: #F44336;
        }
        
        .file-info, .task-info {
            flex: 1;
        }
        
        .file-name, .task-name {
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .file-details, .task-details {
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
        }
        
        .network-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #4CAF50;
            animation: pulse 2s infinite;
        }
        
        .status-indicator.offline {
            background: #F44336;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            transition: width 0.3s ease;
        }
        
        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid;
        }
        
        .alert.success {
            background: rgba(76, 175, 80, 0.2);
            border-left-color: #4CAF50;
        }
        
        .alert.error {
            background: rgba(244, 67, 54, 0.2);
            border-left-color: #F44336;
        }
        
        .alert.info {
            background: rgba(33, 150, 243, 0.2);
            border-left-color: #2196F3;
        }
        
        .hidden {
            display: none;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: #ccc;
        }
        
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #ffd700;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ XMBL P2P Client</h1>
            <p>Decentralized Storage & Compute Network Interface</p>
            <div class="network-status">
                <div class="status-indicator" id="networkStatus"></div>
                <span id="networkStatusText">Connecting to network...</span>
            </div>
        </div>
        
        <div class="main-grid">
            <!-- Storage Section -->
            <div class="card">
                <h3>üíæ P2P Storage</h3>
                <div class="form-group">
                    <label for="fileInput">Select File to Store:</label>
                    <input type="file" id="fileInput" accept="*/*">
                </div>
                <div class="form-group">
                    <label for="redundancy">Redundancy Level:</label>
                    <select id="redundancy">
                        <option value="1">1x (No redundancy)</option>
                        <option value="3" selected>3x (Recommended)</option>
                        <option value="5">5x (High redundancy)</option>
                        <option value="7">7x (Maximum redundancy)</option>
                    </select>
                </div>
                <button class="btn" onclick="storeFile()">üì§ Store File on Network</button>
                <button class="btn btn-secondary" onclick="refreshStorage()">üîÑ Refresh Storage</button>
                
                <h4 style="margin-top: 20px; color: #ffd700;">Stored Files:</h4>
                <div class="file-list" id="fileList">
                    <div class="loading">Loading stored files...</div>
                </div>
            </div>
            
            <!-- Compute Section -->
            <div class="card">
                <h3>‚ö° P2P Compute</h3>
                <div class="form-group">
                    <label for="wasmFile">WASM File:</label>
                    <input type="file" id="wasmFile" accept=".wasm">
                </div>
                <div class="form-group">
                    <label for="inputData">Input Data (JSON):</label>
                    <textarea id="inputData" rows="4" placeholder='{"key": "value", "data": [1, 2, 3]}'></textarea>
                </div>
                <button class="btn" onclick="submitComputeTask()">üöÄ Submit Compute Task</button>
                <button class="btn btn-secondary" onclick="refreshCompute()">üîÑ Refresh Tasks</button>
                
                <h4 style="margin-top: 20px; color: #ffd700;">Compute Tasks:</h4>
                <div class="task-list" id="taskList">
                    <div class="loading">Loading compute tasks...</div>
                </div>
            </div>
        </div>
        
        <!-- Network Status Section -->
        <div class="card">
            <h3>üåê Network Status & Peers</h3>
            <div class="status-grid" id="networkGrid">
                <div class="status-item">
                    <h4>Connected Nodes</h4>
                    <div id="connectedNodes">Loading...</div>
                </div>
                <div class="status-item">
                    <h4>Network Latency</h4>
                    <div id="networkLatency">Loading...</div>
                </div>
                <div class="status-item">
                    <h4>Total Storage</h4>
                    <div id="totalStorage">Loading...</div>
                </div>
                <div class="status-item">
                    <h4>Active Compute</h4>
                    <div id="activeCompute">Loading...</div>
                </div>
            </div>
            <button class="btn btn-secondary" onclick="refreshNetworkStatus()">üîÑ Refresh Network Status</button>
        </div>
        
        <!-- Blockchain Section -->
        <div class="card">
            <h3>üí∞ Blockchain & Tokens</h3>
            <div class="form-group">
                <label for="walletAddress">Wallet Address:</label>
                <input type="text" id="walletAddress" placeholder="Enter wallet address" value="demo_wallet_001">
            </div>
            <button class="btn" onclick="checkBalance()">üí≥ Check Balance</button>
            <button class="btn btn-secondary" onclick="viewTransactions()">üìä View Transactions</button>
            
            <div id="blockchainInfo" style="margin-top: 20px;">
                <div class="loading">Click "Check Balance" to view wallet information</div>
            </div>
        </div>
        
        <!-- Alerts Section -->
        <div id="alertsContainer"></div>
    </div>

    <script>
        // Configuration
        const CONFIG = {
            MONITORING_URL: 'http://localhost:3001',
            CLI_SIMULATION: true, // Simulate CLI responses
            AUTO_REFRESH_INTERVAL: 15000, // 15 seconds
        };
        
        // State
        let storedFiles = [];
        let computeTasks = [];
        let networkPeers = [];
        let walletBalance = 0;
        let isOnline = false;
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });
        
        async function initializeApp() {
            showAlert('info', 'üöÄ Initializing XMBL P2P Client...');
            
            // Check network connectivity
            await checkNetworkStatus();
            
            // Load initial data
            await Promise.all([
                refreshStorage(),
                refreshCompute(),
                refreshNetworkStatus(),
                checkBalance()
            ]);
            
            // Set up auto-refresh
            setInterval(() => {
                if (isOnline) {
                    refreshNetworkStatus();
                }
            }, CONFIG.AUTO_REFRESH_INTERVAL);
            
            showAlert('success', '‚úÖ XMBL P2P Client initialized successfully!');
        }
        
        async function checkNetworkStatus() {
            try {
                const response = await fetch(`${CONFIG.MONITORING_URL}/health`);
                if (response.ok) {
                    isOnline = true;
                    document.getElementById('networkStatus').classList.remove('offline');
                    document.getElementById('networkStatusText').textContent = 'Connected to XMBL Network';
                } else {
                    throw new Error('Network unavailable');
                }
            } catch (error) {
                isOnline = false;
                document.getElementById('networkStatus').classList.add('offline');
                document.getElementById('networkStatusText').textContent = 'Offline - Using simulated mode';
                showAlert('warning', '‚ö†Ô∏è Network offline - Running in simulation mode');
            }
        }
        
        async function storeFile() {
            const fileInput = document.getElementById('fileInput');
            const redundancy = document.getElementById('redundancy').value;
            
            if (!fileInput.files[0]) {
                showAlert('error', '‚ùå Please select a file to store');
                return;
            }
            
            const file = fileInput.files[0];
            showAlert('info', `üì§ Storing file: ${file.name} with ${redundancy}x redundancy...`);
            
            // Simulate file storage process
            const progressBar = createProgressBar();
            document.getElementById('fileList').prepend(progressBar);
            
            // Simulate network operation
            setTimeout(async () => {
                const cid = generateCID(file.name);
                const fileInfo = {
                    id: Date.now().toString(),
                    name: file.name,
                    size: file.size,
                    cid: cid,
                    redundancy: parseInt(redundancy),
                    timestamp: new Date().toISOString(),
                    status: 'stored',
                    nodes: generateRandomNodes(parseInt(redundancy))
                };
                
                storedFiles.unshift(fileInfo);
                updateFileList();
                
                // Remove progress bar
                progressBar.remove();
                
                showAlert('success', `‚úÖ File stored successfully! CID: ${cid}`);
                fileInput.value = '';
            }, 2000);
        }
        
        async function submitComputeTask() {
            const wasmFile = document.getElementById('wasmFile').files[0];
            const inputData = document.getElementById('inputData').value;
            
            if (!wasmFile) {
                showAlert('error', '‚ùå Please select a WASM file');
                return;
            }
            
            if (!inputData.trim()) {
                showAlert('error', '‚ùå Please provide input data');
                return;
            }
            
            showAlert('info', `üöÄ Submitting compute task: ${wasmFile.name}...`);
            
            // Simulate task submission
            const progressBar = createProgressBar();
            document.getElementById('taskList').prepend(progressBar);
            
            setTimeout(async () => {
                const taskId = generateTaskID(wasmFile.name);
                const taskInfo = {
                    id: taskId,
                    wasmFile: wasmFile.name,
                    inputData: inputData,
                    status: 'running',
                    timestamp: new Date().toISOString(),
                    progress: 0,
                    result: null
                };
                
                computeTasks.unshift(taskInfo);
                updateTaskList();
                
                // Remove progress bar
                progressBar.remove();
                
                showAlert('success', `‚úÖ Compute task submitted! Task ID: ${taskId}`);
                
                // Simulate task execution
                simulateTaskExecution(taskId);
            }, 1500);
        }
        
        function simulateTaskExecution(taskId) {
            const task = computeTasks.find(t => t.id === taskId);
            if (!task) return;
            
            const interval = setInterval(() => {
                task.progress += Math.random() * 20;
                if (task.progress >= 100) {
                    task.progress = 100;
                    task.status = 'completed';
                    task.result = generateMockResult();
                    clearInterval(interval);
                    showAlert('success', `üéâ Task ${taskId} completed successfully!`);
                }
                updateTaskList();
            }, 1000);
        }
        
        async function refreshStorage() {
            if (storedFiles.length === 0) {
                // Simulate some existing files
                storedFiles = [
                    {
                        id: '1',
                        name: 'document.pdf',
                        size: 2048576,
                        cid: 'cid_document_pdf_123',
                        redundancy: 3,
                        timestamp: new Date(Date.now() - 86400000).toISOString(),
                        status: 'stored',
                        nodes: generateRandomNodes(3)
                    },
                    {
                        id: '2',
                        name: 'image.jpg',
                        size: 1048576,
                        cid: 'cid_image_jpg_456',
                        redundancy: 5,
                        timestamp: new Date(Date.now() - 172800000).toISOString(),
                        status: 'stored',
                        nodes: generateRandomNodes(5)
                    }
                ];
            }
            updateFileList();
        }
        
        async function refreshCompute() {
            if (computeTasks.length === 0) {
                // Simulate some existing tasks
                computeTasks = [
                    {
                        id: 'task_1',
                        wasmFile: 'data_processor.wasm',
                        inputData: '{"operation": "sort", "data": [3,1,4,1,5]}',
                        status: 'completed',
                        timestamp: new Date(Date.now() - 3600000).toISOString(),
                        progress: 100,
                        result: '{"result": [1,1,3,4,5], "execution_time": "45ms"}'
                    }
                ];
            }
            updateTaskList();
        }
        
        async function refreshNetworkStatus() {
            if (isOnline) {
                try {
                    const response = await fetch(`${CONFIG.MONITORING_URL}/metrics`);
                    const data = await response.json();
                    
                    document.getElementById('connectedNodes').textContent = '2 nodes';
                    document.getElementById('networkLatency').textContent = '15ms';
                    document.getElementById('totalStorage').textContent = '1.2 TB';
                    document.getElementById('activeCompute').textContent = '3 tasks';
                } catch (error) {
                    console.error('Failed to fetch network status:', error);
                }
            } else {
                // Simulated network status
                document.getElementById('connectedNodes').textContent = '5 nodes (simulated)';
                document.getElementById('networkLatency').textContent = '25ms (simulated)';
                document.getElementById('totalStorage').textContent = '2.5 TB (simulated)';
                document.getElementById('activeCompute').textContent = '7 tasks (simulated)';
            }
        }
        
        async function checkBalance() {
            const address = document.getElementById('walletAddress').value;
            
            if (CONFIG.CLI_SIMULATION) {
                walletBalance = 1000 + Math.floor(Math.random() * 500);
                
                const balanceInfo = `
                    <div class="status-item">
                        <h4>üí∞ Wallet Balance</h4>
                        <div style="font-size: 1.5em; color: #4CAF50; margin: 10px 0;">${walletBalance} XMBL</div>
                        <div>Address: ${address}</div>
                        <div>Last updated: ${new Date().toLocaleString()}</div>
                    </div>
                    <div class="status-item">
                        <h4>üìä Recent Activity</h4>
                        <div>Storage operations: 12</div>
                        <div>Compute tasks: 8</div>
                        <div>Network rewards: 45 XMBL</div>
                    </div>
                `;
                
                document.getElementById('blockchainInfo').innerHTML = balanceInfo;
            }
        }
        
        async function viewTransactions() {
            showAlert('info', 'üìä Loading transaction history...');
            
            // Simulate transaction loading
            setTimeout(() => {
                const transactions = [
                    { type: 'storage', amount: 5, description: 'File storage fee', timestamp: '2 hours ago' },
                    { type: 'compute', amount: 10, description: 'Compute task execution', timestamp: '4 hours ago' },
                    { type: 'reward', amount: 15, description: 'Network contribution reward', timestamp: '1 day ago' }
                ];
                
                let transactionsHtml = '<h4 style="margin-top: 20px; color: #ffd700;">Recent Transactions:</h4>';
                transactions.forEach(tx => {
                    const color = tx.type === 'reward' ? '#4CAF50' : '#FF9800';
                    transactionsHtml += `
                        <div class="status-item" style="margin-bottom: 10px;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <div style="font-weight: bold;">${tx.description}</div>
                                    <div style="font-size: 0.9em; opacity: 0.8;">${tx.timestamp}</div>
                                </div>
                                <div style="color: ${color}; font-weight: bold;">${tx.amount > 0 ? '+' : ''}${tx.amount} XMBL</div>
                            </div>
                        </div>
                    `;
                });
                
                document.getElementById('blockchainInfo').innerHTML += transactionsHtml;
            }, 1000);
        }
        
        function updateFileList() {
            const fileList = document.getElementById('fileList');
            
            if (storedFiles.length === 0) {
                fileList.innerHTML = '<div class="loading">No files stored yet</div>';
                return;
            }
            
            fileList.innerHTML = storedFiles.map(file => `
                <div class="file-item ${file.status === 'stored' ? '' : 'warning'}">
                    <div class="file-info">
                        <div class="file-name">${file.name}</div>
                        <div class="file-details">
                            CID: ${file.cid} | Size: ${formatFileSize(file.size)} | 
                            Redundancy: ${file.redundancy}x | Stored: ${formatTimestamp(file.timestamp)}
                        </div>
                        <div class="file-details">
                            Nodes: ${file.nodes.join(', ')}
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-small btn-secondary" onclick="downloadFile('${file.cid}')">üì• Download</button>
                        <button class="btn btn-small btn-warning" onclick="verifyFile('${file.cid}')">üîç Verify</button>
                        <button class="btn btn-small btn-danger" onclick="removeFile('${file.id}')">üóëÔ∏è Remove</button>
                    </div>
                </div>
            `).join('');
        }
        
        function updateTaskList() {
            const taskList = document.getElementById('taskList');
            
            if (computeTasks.length === 0) {
                taskList.innerHTML = '<div class="loading">No compute tasks yet</div>';
                return;
            }
            
            taskList.innerHTML = computeTasks.map(task => `
                <div class="task-item ${task.status === 'completed' ? '' : task.status === 'running' ? 'warning' : 'error'}">
                    <div class="task-info">
                        <div class="task-name">${task.wasmFile}</div>
                        <div class="task-details">
                            Task ID: ${task.id} | Status: ${task.status} | 
                            Submitted: ${formatTimestamp(task.timestamp)}
                        </div>
                        ${task.status === 'running' ? `
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${task.progress}%"></div>
                            </div>
                            <div>Progress: ${task.progress.toFixed(1)}%</div>
                        ` : ''}
                        ${task.result ? `<div class="task-details">Result: ${task.result}</div>` : ''}
                    </div>
                    <div class="action-buttons">
                        ${task.status === 'running' ? `
                            <button class="btn btn-small btn-warning" onclick="cancelTask('${task.id}')">‚èπÔ∏è Cancel</button>
                        ` : ''}
                        ${task.status === 'completed' ? `
                            <button class="btn btn-small btn-secondary" onclick="downloadResult('${task.id}')">üì• Download Result</button>
                        ` : ''}
                        <button class="btn btn-small btn-danger" onclick="removeTask('${task.id}')">üóëÔ∏è Remove</button>
                    </div>
                </div>
            `).join('');
        }
        
        // Utility functions
        function generateCID(filename) {
            const timestamp = Date.now();
            const random = Math.random().toString(36).substring(2, 8);
            return `cid_${filename.replace(/[^a-zA-Z0-9]/g, '_')}_${timestamp}_${random}`;
        }
        
        function generateTaskID(filename) {
            const timestamp = Date.now();
            const random = Math.random().toString(36).substring(2, 8);
            return `task_${filename.replace(/[^a-zA-Z0-9]/g, '_')}_${timestamp}_${random}`;
        }
        
        function generateRandomNodes(count) {
            const nodeTypes = ['storage', 'compute', 'hybrid'];
            const nodes = [];
            for (let i = 0; i < count; i++) {
                const type = nodeTypes[Math.floor(Math.random() * nodeTypes.length)];
                const id = Math.floor(Math.random() * 1000);
                nodes.push(`${type}_node_${id}`);
            }
            return nodes;
        }
        
        function generateMockResult() {
            const results = [
                '{"processed": true, "output": "success", "execution_time": "45ms"}',
                '{"result": [1,2,3,4,5], "sum": 15, "average": 3}',
                '{"status": "completed", "data": "processed_data_123", "metadata": {"size": 1024}}'
            ];
            return results[Math.floor(Math.random() * results.length)];
        }
        
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        function formatTimestamp(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diff = now - date;
            
            if (diff < 60000) return 'Just now';
            if (diff < 3600000) return Math.floor(diff / 60000) + ' minutes ago';
            if (diff < 86400000) return Math.floor(diff / 3600000) + ' hours ago';
            return date.toLocaleDateString();
        }
        
        function createProgressBar() {
            const progressDiv = document.createElement('div');
            progressDiv.className = 'status-item';
            progressDiv.innerHTML = `
                <h4>Processing...</h4>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 0%"></div>
                </div>
                <div>Please wait...</div>
            `;
            return progressDiv;
        }
        
        function showAlert(type, message) {
            const alertsContainer = document.getElementById('alertsContainer');
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert ${type}`;
            alertDiv.innerHTML = message;
            
            alertsContainer.appendChild(alertDiv);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }
        
        // Action handlers
        function downloadFile(cid) {
            showAlert('info', `üì• Downloading file with CID: ${cid}...`);
            // Simulate download
            setTimeout(() => {
                showAlert('success', '‚úÖ File downloaded successfully!');
            }, 2000);
        }
        
        function verifyFile(cid) {
            showAlert('info', `üîç Verifying file integrity for CID: ${cid}...`);
            // Simulate verification
            setTimeout(() => {
                showAlert('success', '‚úÖ File verification successful! All chunks are intact.');
            }, 1500);
        }
        
        function removeFile(fileId) {
            if (confirm('Are you sure you want to remove this file from the network?')) {
                storedFiles = storedFiles.filter(f => f.id !== fileId);
                updateFileList();
                showAlert('success', 'üóëÔ∏è File removed from network');
            }
        }
        
        function cancelTask(taskId) {
            if (confirm('Are you sure you want to cancel this task?')) {
                const task = computeTasks.find(t => t.id === taskId);
                if (task) {
                    task.status = 'cancelled';
                    updateTaskList();
                    showAlert('info', '‚èπÔ∏è Task cancelled');
                }
            }
        }
        
        function downloadResult(taskId) {
            const task = computeTasks.find(t => t.id === taskId);
            if (task && task.result) {
                showAlert('info', `üì• Downloading result for task: ${taskId}...`);
                // Simulate download
                setTimeout(() => {
                    showAlert('success', '‚úÖ Result downloaded successfully!');
                }, 1000);
            }
        }
        
        function removeTask(taskId) {
            if (confirm('Are you sure you want to remove this task?')) {
                computeTasks = computeTasks.filter(t => t.id !== taskId);
                updateTaskList();
                showAlert('success', 'üóëÔ∏è Task removed');
            }
        }
    </script>
</body>
</html>
